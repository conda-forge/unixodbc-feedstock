{% set name = "unixODBC" %}
{% set version = "2.3.12.dev20230824" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://github.com/lurcher/unixODBC/archive/fb1d543254d0b0ccab97e98c35b3ac1558686975.zip
  sha256: 7cb506c957c8a8beab237c867c4581ebdc35784cb7f936f20ede9eff3f4ae832

build:
  number: 0
  skip: true  # [win]
  run_exports:
    - {{ pin_subpackage('unixodbc', max_pin='x.x') }}

requirements:
  build:
    - {{ compiler('c') }}
    - {{ compiler('cxx') }}
    - automake
    - libtool
    - make
  host:
    - libiconv
    - libedit
  run:
    - libiconv
    - libedit

test:
  commands:
    - test -f $PREFIX/lib/libodbc.2.dylib  # [osx]
    - test -f $PREFIX/lib/libodbc.dylib  # [osx]
    - test -f $PREFIX/lib/libodbcinst.2.dylib  # [osx]
    - test -f $PREFIX/lib/libodbcinst.dylib  # [osx]
    - test -f $PREFIX/lib/libodbc.so.2.0.0  # [linux]
    - test -f $PREFIX/lib/libodbc.so  # [linux]
    - test -f $PREFIX/lib/libodbcinst.so.2.0.0  # [linux]
    - test -f $PREFIX/lib/libodbcinst.so  # [linux]

about:
  home: http://www.unixodbc.org/
  license: LGPL-2.1
  license_file: COPYING
  summary: ODBC on non MS Windows platforms
  description: |
    The unixODBC Project goals are to develop and promote unixODBC to be the
    definitive standard for ODBC on non MS Windows platforms. This is to
    include GUI support for both KDE and GNOME.

extra:
  recipe-maintainers:
    - MathMagique
    - xhochy
    - mariusvniekerk
